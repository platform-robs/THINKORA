<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Thinkora | Herramientas</title>

<link href="https://fonts.googleapis.com/css2?family=Righteous&family=Comfortaa:wght@300;400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="assets/css/styles.css">
<link rel="stylesheet"
 href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>

<style>

/* =============================
   CONTENEDOR PRINCIPAL
============================= */

.tools-main{
  text-align:center;
  padding:80px 20px;
}

.tools-main h1{
  font-family:'Righteous', cursive;
  font-size:2.6rem;
  margin-bottom:10px;
}

.tools-main p{
  color:var(--text-muted);
  max-width:800px;
  margin:0 auto 50px;
}

/* =============================
   GRID
============================= */

.tools-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:25px;
  max-width:1200px;
  margin:0 auto;
}

/* =============================
   TARJETAS ESTILO CONTORNO AZUL
============================= */

.tool-card{
  background:var(--bg-card);
  border:2px solid transparent;
  padding:28px 20px;
  border-radius:18px;
  text-decoration:none;
  color:var(--text-main);
  font-weight:600;
  transition:.3s ease;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
  font-size:1rem;
}

.tool-card i{
  font-size:1.2rem;
}

.tool-card:hover{
  transform:translateY(-6px);
  border:2px solid var(--accent-blue);
  box-shadow:0 10px 25px rgba(0,168,198,.25);
}

/* Botón especial crear usuario */
.highlight-card{
  background:var(--gradient-main);
  color:#0b0b0b;
  font-weight:800;
  border:none;
}

/* =============================
   MODALES
============================= */

.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  backdrop-filter:blur(6px);
  justify-content:center;
  align-items:center;
  z-index:2000;
}

.modal-content{
  background:var(--bg-dark);
  padding:35px;
  border-radius:20px;
  width:90%;
  max-width:500px;
  text-align:left;
}

.modal-content h2{
  text-align:center;
  margin-bottom:20px;
}

.form-group{
  margin-bottom:15px;
}

label{
  display:block;
  margin-bottom:6px;
  font-size:.9rem;
  color:var(--text-muted);
}

input, select{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid var(--border-soft);
  background:var(--bg-card);
  color:var(--text-main);
}

button{
  margin-top:15px;
  width:100%;
  padding:12px;
  border:none;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
  background:var(--gradient-main);
  color:#0b0b0b;
}

.close-btn{
  margin-top:10px;
  background:#444;
  color:white;
}

</style>
</head>

<body>

<div id="navbar-container"></div>

<main class="tools-main">

<h1>Herramientas Thinkora</h1>
<p>Selecciona la herramienta que necesitas para tu gestión interna.</p>

<div class="tools-grid">

  <!-- ================= ADMIN ================= -->

  <div class="tool-card" onclick="requestAccess('TOOLS/cotizador.html')">
    <i class="fa-solid fa-calculator"></i> Cotizador
  </div>

  <div class="tool-card" onclick="requestAccess('TOOLS/ver_cotizaciones.html')">
    <i class="fa-solid fa-file-invoice"></i> Ver Cotizaciones
  </div>

  <div class="tool-card" onclick="requestAccess('TOOLS/generar_propuesta.html')">
    <i class="fa-solid fa-file-signature"></i> Generar Propuesta
  </div>

  <div class="tool-card" onclick="requestAccess('TOOLS/ver_propuestas.html')">
    <i class="fa-solid fa-folder-open"></i> Ver Propuestas
  </div>

  <div class="tool-card" onclick="requestAccess('TOOLS/contratos.html')">
    <i class="fa-solid fa-file-contract"></i> Contratos
  </div>

  <div class="tool-card" onclick="requestAccess('TOOLS/presentacion.html')">
    <i class="fa-solid fa-users"></i> Presentación Agentes
  </div>

  <!-- ================= QR ================= -->

  <a class="tool-card" href="TOOLS/qrs.html">
    <i class="fa-solid fa-qrcode"></i> Generador QR
  </a>

  <!-- ================= PROYECTOS POPUP ================= -->

  <div class="tool-card" onclick="openProjects()">
    <i class="fa-solid fa-briefcase"></i> Proyectos
  </div>

  <!-- ================= CREAR USUARIO ================= -->

  <div class="tool-card highlight-card" onclick="openRegister()">
    <i class="fa-solid fa-user-plus"></i> Crear Usuario
  </div>

</div>

</main>

<div id="footer-container"></div>

<!-- ================= LOGIN MODAL ================= -->

<div class="modal" id="loginModal">
<div class="modal-content">
<h2>Acceso requerido</h2>

<div class="form-group">
<label>ID</label>
<input type="text" id="loginId">
</div>

<div class="form-group">
<label>Contraseña</label>
<input type="password" id="loginPassword">
</div>

<button onclick="validateAccess()">Ingresar</button>
<button class="close-btn" onclick="closeLogin()">Cerrar</button>

</div>
</div>

<!-- ================= PROYECTOS POPUP ================= -->

<div class="modal" id="projectsModal">
<div class="modal-content">
<h2>Proyectos</h2>

<a href="https://ejemplo1.com" target="_blank">Proyecto 1</a><br><br>
<a href="https://ejemplo2.com" target="_blank">Proyecto 2</a><br><br>

<button class="close-btn" onclick="closeProjects()">Cerrar</button>
</div>
</div>

<script>

/* ================= CONFIG ================= */

const WEBAPP_URL = "https://script.google.com/macros/s/AKfycbwkiusDPtzKcizYzRkQHwUEe6N9E3D2ATlnmGGBBeBykf7pmnSjJ5wroH-HVMjEkW25/exec";

let selectedTool = "";

/* ================= LOGIN ================= */

function requestAccess(path){
  selectedTool = path;
  document.getElementById("loginModal").style.display = "flex";
}

function closeLogin(){
  document.getElementById("loginModal").style.display = "none";
}

async function validateAccess(){

  const id = document.getElementById("loginId").value.trim();
  const password = document.getElementById("loginPassword").value.trim();

  if(!id || !password){
    alert("Ingresa ID y contraseña");
    return;
  }

  try{
    const res = await fetch(WEBAPP_URL,{
      method:"POST",
      body:new URLSearchParams({
        action:"login",
        id:id,
        password:password
      })
    });

    const data = await res.json();

    if(data.success){
      window.location.href = selectedTool;
    }else{
      alert(data.message);
    }

  }catch(err){
    alert("Error de conexión con el servidor");
  }
}

/* ================= PROYECTOS ================= */

function openProjects(){
  document.getElementById("projectsModal").style.display="flex";
}

function closeProjects(){
  document.getElementById("projectsModal").style.display="none";
}

/* ================= REGISTRO ================= */

function openRegister(){
  alert("Aquí conectaremos el registro global.");
}

</script>

</body>
</html>
